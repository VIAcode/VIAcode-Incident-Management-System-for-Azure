{  
   "contentVersion":"1.0.0.0",
   "parameters":{  
      "appInsightName":{  
         "type":"string"
      },
      "rgName":{  
         "type":"string"
      },
      "displayName":{  
         "type":"string"
      },
      "location":{  
         "type":"string"
      }
   },
   "variables":{  
      "workbookName":"[guid(resourceGroup().Id)]"
   },
   "resources":[  
      {  
         "name":"[variables('workbookName')]",
         "type":"microsoft.insights/workbooks",
         "location":"[parameters('location')]",
         "apiVersion":"2018-06-17-preview",
         "dependsOn":[  

         ],
         "kind":"shared",
         "properties":{  
            "displayName":"[parameters('displayName')]",
            "serializedData":"{\"version\":\"Notebook/1.0\",\"items\":[{\"type\":1,\"content\":\"{\\\"json\\\":\\\"## VIAcode Incident Management SLA\\\\n---\\\\n\\\\n__*Welcome to your VIAcode Incident Management reports. Here you can see all about tickets.*__\\\"}\",\"name\":\"text - 2\"},{\"type\":9,\"content\":\"{\\\"version\\\":\\\"KqlParameterItem/1.0\\\",\\\"query\\\":\\\"\\\",\\\"crossComponentResources\\\":[],\\\"parameters\\\":[{\\\"id\\\":\\\"f9fbff42-c6e1-45e5-ac5c-aff111e8dfc1\\\",\\\"version\\\":\\\"KqlParameterItem/1.0\\\",\\\"name\\\":\\\"Timerange1\\\",\\\"label\\\":\\\"Time Range\\\",\\\"type\\\":4,\\\"value\\\":{\\\"durationMs\\\":2592000000},\\\"typeSettings\\\":{\\\"selectableValues\\\":[{\\\"durationMs\\\":300000},{\\\"durationMs\\\":900000},{\\\"durationMs\\\":1800000},{\\\"durationMs\\\":3600000},{\\\"durationMs\\\":14400000},{\\\"durationMs\\\":43200000},{\\\"durationMs\\\":86400000},{\\\"durationMs\\\":172800000},{\\\"durationMs\\\":259200000},{\\\"durationMs\\\":604800000},{\\\"durationMs\\\":1209600000},{\\\"durationMs\\\":2419200000},{\\\"durationMs\\\":2592000000},{\\\"durationMs\\\":5184000000},{\\\"durationMs\\\":7776000000}],\\\"allowCustom\\\":true}}],\\\"style\\\":\\\"pills\\\",\\\"queryType\\\":0,\\\"resourceType\\\":\\\"microsoft.insights/components\\\"}\",\"name\":\"parameters - 5\"},{\"type\":3,\"content\":\"{\\\"version\\\":\\\"KqlItem/1.0\\\",\\\"query\\\":\\\"traces\\\\n| where message startswith \\\\\\\"TRSLA\\\\\\\" and timestamp {Timerange1:value}\\\\n| project input_string=split(message, \\\\\\\";\\\\\\\"), timestamp \\\\n| extend responded_tickets=input_string[1]\\\\n| extend total_tickets=split(input_string[0], \\\\\\\":\\\\\\\")[1]\\\\n| project toint(total_tickets), toint(responded_tickets), timestamp\\\",\\\"size\\\":1,\\\"aggregation\\\":3,\\\"title\\\":\\\"Total responded SLA\\\",\\\"queryType\\\":0,\\\"resourceType\\\":\\\"microsoft.insights/components\\\",\\\"visualization\\\":\\\"areachart\\\"}\",\"name\":\"Total responded SLA\"},{\"type\":3,\"content\":\"{\\\"version\\\":\\\"KqlItem/1.0\\\",\\\"query\\\":\\\"traces\\\\r\\\\n| where message startswith \\\\\\\"TRSLAPercent\\\\\\\" \\\\r\\\\n| project input_string=split(message, \\\\\\\";\\\\\\\"), timestamp \\\\r\\\\n| extend responded_tickets=input_string[1]\\\\r\\\\n| extend total_tickets=split(input_string[0], \\\\\\\":\\\\\\\")[1]\\\\r\\\\n| project toint(total_tickets), toint(responded_tickets), timestamp\\\",\\\"size\\\":0,\\\"aggregation\\\":3,\\\"title\\\":\\\"Passes total responded SLA violations %\\\",\\\"timeContext\\\":{\\\"durationMs\\\":2592000000},\\\"queryType\\\":0,\\\"resourceType\\\":\\\"microsoft.insights/components\\\",\\\"visualization\\\":\\\"linechart\\\"}\",\"name\":\"Passes total responded SLA violations %\"},{\"type\":3,\"content\":\"{\\\"version\\\":\\\"KqlItem/1.0\\\",\\\"query\\\":\\\"traces\\\\r\\\\n| where message startswith \\\\\\\"RSLAV\\\\\\\" \\\\r\\\\n| project input_string=split(message, \\\\\\\";\\\\\\\"), timestamp \\\\r\\\\n| extend responded_tickets=input_string[1]\\\\r\\\\n| extend total_tickets=split(input_string[0], \\\\\\\":\\\\\\\")[1]\\\\r\\\\n| project toint(total_tickets), toint(responded_tickets), timestamp\\\",\\\"size\\\":0,\\\"aggregation\\\":3,\\\"title\\\":\\\"Respond SLA Violated\\\",\\\"timeContext\\\":{\\\"durationMs\\\":2592000000},\\\"queryType\\\":0,\\\"resourceType\\\":\\\"microsoft.insights/components\\\",\\\"visualization\\\":\\\"areachart\\\"}\",\"name\":\"query - 6\"},{\"type\":3,\"content\":\"{\\\"version\\\":\\\"KqlItem/1.0\\\",\\\"query\\\":\\\"traces\\\\r\\\\n| where message startswith \\\\\\\"RSLAV\\\\\\\" \\\\r\\\\n| project input_string=split(message, \\\\\\\";\\\\\\\"), timestamp \\\\r\\\\n| extend responded_tickets=input_string[1]\\\\r\\\\n| extend total_tickets=split(input_string[0], \\\\\\\":\\\\\\\")[1]\\\\r\\\\n| project toint(total_tickets), toint(responded_tickets), timestamp\\\",\\\"size\\\":0,\\\"aggregation\\\":3,\\\"title\\\":\\\"Responded within SLA %\\\",\\\"timeContext\\\":{\\\"durationMs\\\":2592000000},\\\"queryType\\\":0,\\\"resourceType\\\":\\\"microsoft.insights/components\\\",\\\"visualization\\\":\\\"linechart\\\"}\",\"name\":\"Responded within SLA %\"}],\"isLocked\":false,\"styleSettings\":{}}",
            "version":"1.0",
            "sourceId":"[concat('/subscriptions/', subscription().subscriptionId, '/resourceGroups/', parameters('rgName'), '/providers/microsoft.insights/components/', parameters('appInsightName'))]",
            "category":"tsg"
         }
      }
   ],
   "outputs":{  

   },
   "$schema":"http://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#"
}